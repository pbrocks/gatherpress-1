(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const t=window.wp.element,n=window.wp.i18n,a=window.wp.domReady;var r=e.n(a);const l=window.wp.components,o=window.wp.apiFetch;var s=e.n(o);function c(e){if("object"==typeof GatherPress)return e.split(".").reduce(((e,t)=>e&&e[t]),GatherPress)}window.wp.data;const i=()=>{const[a,r]=(0,t.useState)(!1),[o,i]=(0,t.useState)(!1),[d,m]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),[_,E]=(0,t.useState)(!1),[f,C]=(0,t.useState)(""),y=()=>r(!1);return(0,t.useEffect)((()=>{o?(w(!0),m(!1),h(!1),g(!1)):w(!1),E(!(o||d||u||p))}),[o,d,u,p]),((e,t=!1)=>{for(const[n,a]of Object.entries(e)){let e=n;t&&(e+=t),addEventListener(e,(e=>{a(e.detail)}),!1)}})({setOpen:r}),(0,t.createElement)(t.Fragment,null,a&&(0,t.createElement)(l.Modal,{title:(0,n.__)("Notify members via email","gatherpress"),onRequestClose:y,shouldCloseOnClickOutside:!1},(0,t.createElement)(l.TextareaControl,{label:(0,n.__)("Optional message","gatherpress"),value:f,onChange:e=>C(e)}),(0,t.createElement)("p",{className:"description"},(0,n.__)("Select the recipients for your message by checking the relevant boxes.","gatherpress")),(0,t.createElement)(l.Flex,{gap:"8"},(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n.__)("All Members","gatherpress"),checked:o,onChange:i})),(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n.__)("Attending","gatherpress"),checked:d,onChange:m,disabled:b})),(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n.__)("Waiting List","gatherpress"),checked:u,onChange:h,disabled:b})),(0,t.createElement)(l.FlexItem,null,(0,t.createElement)(l.CheckboxControl,{label:(0,n.__)("Not Attending","gatherpress"),checked:p,onChange:g,disabled:b}))),(0,t.createElement)("br",null),(0,t.createElement)(l.Button,{variant:"primary",onClick:()=>{e.g.confirm((0,n.__)("Confirm you are ready to send?","gatherpress"))&&s()({path:"/gatherpress/v1/event/email/",method:"POST",data:{post_id:c("post_id"),message:f,send:{all:o,attending:d,waiting_list:u,not_attending:p},_wpnonce:c("nonce")}}).then((e=>{e.success&&(y(),C(""),i(!1),m(!1),h(!1),g(!1))}))},disabled:_},(0,n.__)("Send Email","gatherpress"))))};r()((()=>{const e=document.getElementById("gp-event-communication-modal");e&&(0,t.createRoot)(e).render((0,t.createElement)(i,null))}))})();